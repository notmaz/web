
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM Image Generator | AI Art Studio</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: '#020617',
                        surface: '#0f172a',
                        primary: '#6366f1', // Indigo
                        secondary: '#d946ef', // Fuchsia
                        glass: 'rgba(255, 255, 255, 0.05)',
                        glassBorder: 'rgba(255, 255, 255, 0.1)',
                    },
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    animation: {
                        'gradient-x': 'gradient-x 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 6s ease-in-out 3s infinite',
                        'spin-slow': 'spin 10s linear infinite',
                        'fade-up': 'fadeUp 0.8s ease-out forwards',
                        'scroll-left': 'scrollLeft 20s linear infinite',
                    },
                    keyframes: {
                        'gradient-x': {
                            '0%, 100%': { 'background-size': '200% 200%', 'background-position': 'left center' },
                            '50%': { 'background-size': '200% 200%', 'background-position': 'right center' },
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        'fadeUp': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        'scrollLeft': {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            color: white;
            overflow-x: hidden;
        }

        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-8px);
            box-shadow: 0 20px 40px -10px rgba(99, 102, 241, 0.15);
        }

        /* Gradient Text */
        .text-gradient {
            background: linear-gradient(to right, #818cf8, #e879f9, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: gradient-x 4s linear infinite;
        }

        /* Scroll Animations */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Mask Image for Hero Slider */
        .mask-image-gradient {
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Loader */
        .loader {
            width: 48px; height: 48px;
            border: 3px solid #FFF; border-radius: 50%;
            display: inline-block; position: relative;
            box-sizing: border-box; animation: rotation 1s linear infinite;
        }
        .loader::after {
            content: ''; box-sizing: border-box; position: absolute;
            left: 50%; top: 50%; transform: translate(-50%, -50%);
            width: 40px; height: 40px; border-radius: 50%;
            border: 3px solid transparent; border-bottom-color: #818cf8; border-right-color: #e879f9;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .hidden-app { display: none !important; }
    </style>
<link rel="me" href="https://www.blogger.com/profile/11925536241380727429" />
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<script type="text/javascript" language="javascript">
  // Supply ads personalization default for EEA readers
  // See https://www.blogger.com/go/adspersonalization
  adsbygoogle = window.adsbygoogle || [];
  if (typeof adsbygoogle.requestNonPersonalizedAds === 'undefined') {
    adsbygoogle.requestNonPersonalizedAds = 1;
  }
</script>

</head>
<body class="antialiased selection:bg-indigo-500 selection:text-white">

    <!-- ================= LANDING PAGE ================= -->
    <div id="landing-page" class="relative z-10 transition-opacity duration-500">
        
        <!-- Animated Background Mesh -->
        <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
            <div class="absolute top-[-10%] left-[-10%] w-[50vw] h-[50vw] bg-indigo-600/10 rounded-full blur-[120px] animate-pulse"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-fuchsia-600/10 rounded-full blur-[120px] animate-pulse" style="animation-delay: 2s;"></div>
            <div class="absolute top-[40%] left-[30%] w-[20vw] h-[20vw] bg-cyan-500/10 rounded-full blur-[100px] animate-float"></div>
        </div>

        <!-- Header -->
        <header class="fixed top-0 w-full z-50 glass-panel transition-all duration-300" id="main-header">
            <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
                <div class="flex items-center gap-3 group cursor-pointer">
                    <div class="relative">
                        <div class="absolute inset-0 bg-indigo-500 blur-lg opacity-40 group-hover:opacity-60 transition-opacity"></div>
                        <div class="relative w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-fuchsia-600 flex items-center justify-center shadow-lg">
                            <i class="ph-bold ph-aperture text-white text-xl animate-spin-slow"></i>
                        </div>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-white group-hover:text-indigo-200 transition-colors">PM Generator</span>
                </div>
                
                <nav class="hidden lg:flex items-center gap-10 text-sm font-medium text-slate-300">
                    <a href="#features" class="hover:text-white hover:scale-105 transition-all">Features</a>
                    <a href="#gallery" class="hover:text-white hover:scale-105 transition-all">Gallery</a>
                    <a href="#blog" class="hover:text-white hover:scale-105 transition-all">Blog</a>
                    <a href="#about" class="hover:text-white hover:scale-105 transition-all">About</a>
                </nav>

                <div class="flex items-center gap-4">
                    <a href="#" class="hidden md:block text-sm font-medium text-slate-400 hover:text-white transition-colors">Log In</a>
                    <button onclick="openApp()" class="group relative px-6 py-2.5 rounded-full bg-slate-800 text-white font-semibold text-sm overflow-hidden transition-all hover:scale-105 active:scale-95 border border-white/10 shadow-[0_0_20px_-5px_rgba(99,102,241,0.3)] hover:shadow-[0_0_30px_-5px_rgba(99,102,241,0.5)]">
                        <div class="absolute inset-0 bg-gradient-to-r from-indigo-600 to-fuchsia-600 opacity-100 transition-opacity"></div>
                        <span class="relative flex items-center gap-2">
                            Start Creating <i class="ph-bold ph-arrow-right group-hover:translate-x-1 transition-transform"></i>
                        </span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="pt-48 pb-32 px-6 text-center relative overflow-hidden">
            <!-- Decorative Floating Elements -->
            <div class="absolute top-40 left-10 w-24 h-24 glass-card rounded-2xl hidden lg:flex items-center justify-center animate-float">
                <i class="ph-duotone ph-paint-brush-broad text-4xl text-fuchsia-400"></i>
            </div>
            <div class="absolute bottom-40 right-10 w-20 h-20 glass-card rounded-2xl hidden lg:flex items-center justify-center animate-float-delayed">
                <i class="ph-duotone ph-camera text-3xl text-indigo-400"></i>
            </div>

            <div class="max-w-5xl mx-auto relative z-10">
                <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-card text-xs font-medium text-indigo-300 mb-8 border border-indigo-500/30 animate-fade-up">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500"></span>
                    </span>
                    Now with Flux & Turbo Models
                </div>
                
                <h1 class="text-6xl md:text-8xl font-extrabold leading-tight mb-8 tracking-tight animate-fade-up" style="animation-delay: 0.1s">
                    Imagine. Describe. <br />
                    <span class="text-gradient">Visualize.</span>
                </h1>
                
                <p class="text-lg md:text-2xl text-slate-400 mb-12 max-w-3xl mx-auto leading-relaxed animate-fade-up" style="animation-delay: 0.2s">
                    The next generation AI art studio. Transform your wildest ideas into stunning, high-fidelity visuals in milliseconds.
                </p>
                
                <div class="flex flex-col md:flex-row items-center justify-center gap-6 animate-fade-up" style="animation-delay: 0.3s">
                    <button onclick="openApp()" class="w-full md:w-auto px-10 py-5 rounded-2xl bg-white text-black font-bold text-lg hover:shadow-[0_0_40px_-10px_rgba(255,255,255,0.4)] transition-all hover:-translate-y-1 flex items-center justify-center gap-2">
                        <i class="ph-bold ph-magic-wand"></i> Launch Studio
                    </button>
                    <a href="#gallery" class="w-full md:w-auto px-10 py-5 rounded-2xl glass-card text-white font-semibold text-lg hover:bg-white/10 transition-all flex items-center justify-center gap-2">
                        <i class="ph-bold ph-images"></i> Explore Gallery
                    </a>
                </div>
            </div>
            
            <!-- Hero Image Strip (Simulated Slider) -->
            <div class="mt-20 relative w-full h-48 opacity-60 mask-image-gradient overflow-hidden animate-fade-up" style="animation-delay: 0.5s">
                <div class="absolute flex gap-4 animate-scroll-left min-w-full">
                     <!-- Duplicated items for seamless scroll -->
                     <img src="https://image.pollinations.ai/prompt/cyberpunk%20street?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[-2deg]">
                     <img src="https://image.pollinations.ai/prompt/anime%20landscape?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[2deg]">
                     <img src="https://image.pollinations.ai/prompt/3d%20character?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[-1deg]">
                     <img src="https://image.pollinations.ai/prompt/oil%20painting?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[3deg]">
                     <img src="https://image.pollinations.ai/prompt/future%20robot?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[-2deg]">
                     <img src="https://image.pollinations.ai/prompt/space%20nebula?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[1deg]">
                     
                     <!-- Clone for loop -->
                     <img src="https://image.pollinations.ai/prompt/cyberpunk%20street?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[-2deg]">
                     <img src="https://image.pollinations.ai/prompt/anime%20landscape?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[2deg]">
                     <img src="https://image.pollinations.ai/prompt/3d%20character?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[-1deg]">
                     <img src="https://image.pollinations.ai/prompt/oil%20painting?width=300&height=200&nologo=true" class="rounded-xl w-64 h-40 object-cover rotate-[3deg]">
                </div>
            </div>
        </section>

        <!-- Features Grid -->
        <section id="features" class="py-24 px-6 relative">
             <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16 reveal">
                    <h2 class="text-3xl md:text-5xl font-bold mb-4">Unleash Your Creativity</h2>
                    <p class="text-slate-400 max-w-2xl mx-auto">Powerful tools designed for both beginners and professional artists.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Feature 1 -->
                    <div class="glass-card p-8 rounded-3xl reveal hover:bg-indigo-900/10">
                        <div class="w-14 h-14 rounded-2xl bg-indigo-500/20 flex items-center justify-center mb-6 text-indigo-400">
                            <i class="ph-duotone ph-lightning text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">Lightning Fast</h3>
                        <p class="text-slate-400 leading-relaxed">Generate images in under 2 seconds using our optimized Turbo models. No waiting queues.</p>
                    </div>
                    <!-- Feature 2 -->
                    <div class="glass-card p-8 rounded-3xl reveal hover:bg-fuchsia-900/10" style="transition-delay: 0.1s">
                        <div class="w-14 h-14 rounded-2xl bg-fuchsia-500/20 flex items-center justify-center mb-6 text-fuchsia-400">
                            <i class="ph-duotone ph-palette text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">Infinite Styles</h3>
                        <p class="text-slate-400 leading-relaxed">From Anime to Photorealism, Cyberpunk to Oil Painting. Control every aspect of the style.</p>
                    </div>
                    <!-- Feature 3 -->
                    <div class="glass-card p-8 rounded-3xl reveal hover:bg-cyan-900/10" style="transition-delay: 0.2s">
                        <div class="w-14 h-14 rounded-2xl bg-cyan-500/20 flex items-center justify-center mb-6 text-cyan-400">
                            <i class="ph-duotone ph-lock-key-open text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">100% Free & Open</h3>
                        <p class="text-slate-400 leading-relaxed">No credits, no subscriptions. Powered by open-source technology for uncensored creativity.</p>
                    </div>
                </div>
             </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="py-24 px-6 bg-slate-900/30 border-y border-white/5">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-end justify-between mb-12 reveal">
                    <div>
                        <h2 class="text-3xl md:text-5xl font-bold mb-2">Community Showcase</h2>
                        <p class="text-slate-400">Trending generations from our users.</p>
                    </div>
                    <button onclick="openApp()" class="hidden md:flex items-center gap-2 text-indigo-400 hover:text-indigo-300 font-medium transition-colors">
                        Create yours <i class="ph-bold ph-arrow-right"></i>
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Gallery Item 1 -->
                    <div class="glass-card rounded-2xl overflow-hidden aspect-[4/5] group relative cursor-pointer reveal">
                        <img src="https://image.pollinations.ai/prompt/cyberpunk%20city%20neon%20lights%20rain%20futuristic?width=400&height=500&seed=101&model=flux" alt="Cyberpunk City" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="font-bold text-white text-lg">Neon Cyberpunk</p>
                            <p class="text-xs text-indigo-300 font-mono mt-1">Flux Model</p>
                        </div>
                    </div>
                    <!-- Gallery Item 2 -->
                    <div class="glass-card rounded-2xl overflow-hidden aspect-[4/5] group relative cursor-pointer reveal" style="transition-delay: 0.1s">
                        <img src="https://image.pollinations.ai/prompt/anime%20girl%20portrait%20watercolor%20style%20pastel%20colors?width=400&height=500&seed=202&model=flux" alt="Anime Portrait" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                         <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="font-bold text-white text-lg">Ethereal Anime</p>
                            <p class="text-xs text-indigo-300 font-mono mt-1">Flux Model</p>
                        </div>
                    </div>
                    <!-- Gallery Item 3 -->
                    <div class="glass-card rounded-2xl overflow-hidden aspect-[4/5] group relative cursor-pointer reveal" style="transition-delay: 0.2s">
                        <img src="https://image.pollinations.ai/prompt/majestic%20lion%20in%20cosmic%20space%20nebula%20hyperrealistic?width=400&height=500&seed=303&model=flux" alt="Cosmic Lion" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                         <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="font-bold text-white text-lg">Cosmic Nature</p>
                            <p class="text-xs text-indigo-300 font-mono mt-1">Flux Model</p>
                        </div>
                    </div>
                    <!-- Gallery Item 4 -->
                    <div class="glass-card rounded-2xl overflow-hidden aspect-[4/5] group relative cursor-pointer reveal" style="transition-delay: 0.3s">
                        <img src="https://image.pollinations.ai/prompt/minimalist%20architectural%20design%20glass%20house%20forest?width=400&height=500&seed=404&model=flux" alt="Architecture" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                         <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="font-bold text-white text-lg">Modern Zen</p>
                            <p class="text-xs text-indigo-300 font-mono mt-1">Flux Model</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="blog" class="py-24 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16 reveal">
                    <h2 class="text-3xl md:text-5xl font-bold mb-4">Latest from the Blog</h2>
                    <p class="text-slate-400">Tips, tutorials, and AI art news.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Blog Post 1 -->
                    <div class="glass-card rounded-3xl overflow-hidden group reveal">
                        <div class="h-48 overflow-hidden relative">
                            <img src="https://image.pollinations.ai/prompt/man%20working%20on%20computer%20neon%20futuristic%20office?width=600&height=400&nologo=true" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                            <div class="absolute top-4 left-4 bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-full">Tutorial</div>
                        </div>
                        <div class="p-8">
                            <h3 class="text-xl font-bold mb-3 group-hover:text-indigo-400 transition-colors">Mastering Prompt Engineering</h3>
                            <p class="text-slate-400 text-sm leading-relaxed mb-6">Learn the secret keywords that turn average generations into masterpieces. A complete guide to syntax.</p>
                            <a href="#" class="inline-flex items-center gap-2 text-sm font-bold text-white hover:gap-3 transition-all">Read Article <i class="ph-bold ph-arrow-right"></i></a>
                        </div>
                    </div>

                    <!-- Blog Post 2 -->
                    <div class="glass-card rounded-3xl overflow-hidden group reveal" style="transition-delay: 0.1s">
                        <div class="h-48 overflow-hidden relative">
                             <img src="https://image.pollinations.ai/prompt/robot%20painting%20on%20canvas%20art%20studio?width=600&height=400&nologo=true" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                            <div class="absolute top-4 left-4 bg-fuchsia-600 text-white text-xs font-bold px-3 py-1 rounded-full">News</div>
                        </div>
                        <div class="p-8">
                            <h3 class="text-xl font-bold mb-3 group-hover:text-fuchsia-400 transition-colors">The Rise of Flux Model</h3>
                            <p class="text-slate-400 text-sm leading-relaxed mb-6">Why the new Flux architecture is changing the landscape of open-source AI image generation.</p>
                            <a href="#" class="inline-flex items-center gap-2 text-sm font-bold text-white hover:gap-3 transition-all">Read Article <i class="ph-bold ph-arrow-right"></i></a>
                        </div>
                    </div>

                    <!-- Blog Post 3 -->
                    <div class="glass-card rounded-3xl overflow-hidden group reveal" style="transition-delay: 0.2s">
                        <div class="h-48 overflow-hidden relative">
                             <img src="https://image.pollinations.ai/prompt/abstract%20colorful%20shapes%20design?width=600&height=400&nologo=true" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                            <div class="absolute top-4 left-4 bg-cyan-600 text-white text-xs font-bold px-3 py-1 rounded-full">Inspiration</div>
                        </div>
                        <div class="p-8">
                            <h3 class="text-xl font-bold mb-3 group-hover:text-cyan-400 transition-colors">10 Styles You Must Try</h3>
                            <p class="text-slate-400 text-sm leading-relaxed mb-6">Feeling stuck? Here are 10 unique artistic styles to jumpstart your next creative session.</p>
                            <a href="#" class="inline-flex items-center gap-2 text-sm font-bold text-white hover:gap-3 transition-all">Read Article <i class="ph-bold ph-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trust / API Info -->
        <section id="about" class="py-24 px-6 bg-slate-900/50">
            <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                <div class="reveal">
                    <h2 class="text-3xl md:text-5xl font-bold mb-6">Developers First</h2>
                    <p class="text-slate-400 mb-8 leading-relaxed text-lg">
                        PM Generator isn't just a tool; it's a demonstration of what's possible with the Pollinations.ai API. Build your own apps with the same power.
                    </p>
                    <div class="grid grid-cols-2 gap-6">
                         <div class="flex items-start gap-3">
                            <i class="ph-fill ph-check-circle text-indigo-500 text-2xl mt-1"></i>
                            <div>
                                <h4 class="font-bold text-white">Zero Config</h4>
                                <p class="text-sm text-slate-500">No API keys needed</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <i class="ph-fill ph-check-circle text-indigo-500 text-2xl mt-1"></i>
                            <div>
                                <h4 class="font-bold text-white">Commercial Use</h4>
                                <p class="text-sm text-slate-500">Own your creations</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card p-8 rounded-3xl relative overflow-hidden reveal">
                    <div class="absolute top-0 right-0 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"></div>
                    <div class="flex items-center gap-2 mb-4 border-b border-white/10 pb-4">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        <span class="text-xs text-slate-500 ml-2">api_example.js</span>
                    </div>
                    <div class="space-y-2 font-mono text-xs md:text-sm text-slate-400 leading-loose">
                        <p><span class="text-fuchsia-400">const</span> prompt = <span class="text-green-400">"cyberpunk city"</span>;</p>
                        <p><span class="text-fuchsia-400">const</span> url = <span class="text-yellow-300">`https://image.pollinations.ai/prompt/</span><span class="text-indigo-300">${prompt}</span><span class="text-yellow-300">`</span>;</p>
                        <p class="text-slate-600">// Generate image</p>
                        <p><span class="text-fuchsia-400">await</span> fetch(url);</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mega Footer -->
        <footer class="pt-24 pb-12 bg-black border-t border-white/10 relative overflow-hidden">
             <!-- Background Glow -->
             <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-[800px] h-[300px] bg-indigo-600/10 rounded-full blur-[100px] pointer-events-none"></div>

            <div class="max-w-7xl mx-auto px-6">
                <div class="grid grid-cols-1 md:grid-cols-12 gap-12 mb-16">
                    <!-- Brand Column -->
                    <div class="md:col-span-4 space-y-6">
                        <div class="flex items-center gap-2">
                             <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-fuchsia-600 flex items-center justify-center">
                                <i class="ph-bold ph-aperture text-white text-lg"></i>
                            </div>
                            <span class="font-bold text-2xl tracking-tight">PM Generator</span>
                        </div>
                        <p class="text-slate-400 leading-relaxed">
                            Empowering creators with free, limitless AI art generation. Built for the future of digital expression.
                        </p>
                        <div class="flex gap-4">
                            <a href="#" class="w-10 h-10 rounded-full glass-card flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/10 transition-all"><i class="ph-fill ph-twitter-logo text-xl"></i></a>
                            <a href="#" class="w-10 h-10 rounded-full glass-card flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/10 transition-all"><i class="ph-fill ph-instagram-logo text-xl"></i></a>
                            <a href="#" class="w-10 h-10 rounded-full glass-card flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/10 transition-all"><i class="ph-fill ph-discord-logo text-xl"></i></a>
                        </div>
                    </div>

                    <!-- Links Columns -->
                    <div class="md:col-span-2 space-y-4">
                        <h4 class="font-bold text-white">Product</h4>
                        <ul class="space-y-2 text-sm text-slate-400">
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Features</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Gallery</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Pricing (Free)</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">API</a></li>
                        </ul>
                    </div>
                    <div class="md:col-span-2 space-y-4">
                        <h4 class="font-bold text-white">Company</h4>
                        <ul class="space-y-2 text-sm text-slate-400">
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">About</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Blog</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Careers</a></li>
                            <li><a href="#" class="hover:text-indigo-400 transition-colors">Contact</a></li>
                        </ul>
                    </div>

                    <!-- Newsletter Column -->
                    <div class="md:col-span-4 space-y-4">
                        <h4 class="font-bold text-white">Stay Updated</h4>
                        <p class="text-sm text-slate-400">Get the latest prompts and features delivered to your inbox.</p>
                        <form class="flex gap-2">
                            <input type="email" placeholder="Enter your email" class="flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-colors">
                            <button type="button" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-bold transition-colors">Subscribe</button>
                        </form>
                    </div>
                </div>

                <div class="border-t border-white/5 pt-8 flex flex-col md:flex-row items-center justify-between gap-4">
                    <div class="text-slate-500 text-sm">
                        &copy; 2024 PM Image Generator. All rights reserved.
                    </div>
                    <div class="flex gap-6 text-sm text-slate-500">
                        <a href="#" class="hover:text-white transition-colors">Privacy Policy</a>
                        <a href="#" class="hover:text-white transition-colors">Terms of Service</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- ================= APP MODAL (The Generator) ================= -->
    <div id="app-modal" class="fixed inset-0 z-[100] hidden-app bg-black/80 backdrop-blur-sm transition-opacity duration-300">
        <!-- Close Button (Mobile) -->
        <button onclick="closeApp()" class="absolute top-4 right-4 z-50 p-2 bg-white/10 rounded-full md:hidden text-white">
            <i class="ph-bold ph-x"></i>
        </button>

        <div class="flex h-full w-full max-w-[1920px] mx-auto bg-[#020617] relative overflow-hidden shadow-2xl animate-fade-in">
            
            <!-- Left Sidebar (Controls & History) -->
            <aside class="w-full md:w-80 lg:w-96 glass-panel border-r border-white/10 flex flex-col h-full z-20 absolute md:relative transform -translate-x-full md:translate-x-0 transition-transform duration-300" id="sidebar">
                
                <!-- Logo Area -->
                <div class="p-6 border-b border-white/10 flex items-center justify-between">
                    <div class="flex items-center gap-2">
                         <div class="w-6 h-6 rounded bg-gradient-to-br from-indigo-500 to-fuchsia-600 flex items-center justify-center">
                            <i class="ph-bold ph-aperture text-white text-xs"></i>
                        </div>
                        <h1 class="font-bold text-lg">Studio</h1>
                    </div>
                    <button onclick="closeApp()" class="text-slate-400 hover:text-white hidden md:block" title="Exit Studio">
                        <i class="ph-bold ph-sign-out text-xl"></i>
                    </button>
                    <!-- Mobile Close Sidebar -->
                    <button onclick="toggleSidebar()" class="md:hidden text-white">
                         <i class="ph-bold ph-caret-left text-xl"></i>
                    </button>
                </div>

                <div class="flex-1 overflow-y-auto p-6 space-y-8">
                    
                    <!-- Aspect Ratio -->
                    <div>
                        <label class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 block">Aspect Ratio</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="setRatio('1:1', 1024, 1024, this)" class="ratio-btn active-ratio flex flex-col items-center justify-center p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all">
                                <div class="w-6 h-6 border-2 border-current rounded-sm mb-2 opacity-50"></div>
                                <span class="text-xs font-medium">Square (1:1)</span>
                            </button>
                            <button onclick="setRatio('16:9', 1280, 720, this)" class="ratio-btn flex flex-col items-center justify-center p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all">
                                <div class="w-8 h-4 border-2 border-current rounded-sm mb-2 opacity-50"></div>
                                <span class="text-xs font-medium">Wide (16:9)</span>
                            </button>
                            <button onclick="setRatio('9:16', 720, 1280, this)" class="ratio-btn flex flex-col items-center justify-center p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all">
                                <div class="w-4 h-8 border-2 border-current rounded-sm mb-2 opacity-50"></div>
                                <span class="text-xs font-medium">Mobile (9:16)</span>
                            </button>
                            <button onclick="setRatio('4:5', 1080, 1350, this)" class="ratio-btn flex flex-col items-center justify-center p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all">
                                <div class="w-5 h-6 border-2 border-current rounded-sm mb-2 opacity-50"></div>
                                <span class="text-xs font-medium">Portrait (4:5)</span>
                            </button>
                        </div>
                    </div>

                    <!-- Style Selector -->
                    <div>
                        <label class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 block">Art Style</label>
                        <div class="relative">
                            <select id="styleSelect" class="w-full bg-[#0f172a] border border-white/10 rounded-xl px-4 py-3 text-sm text-white appearance-none focus:outline-none focus:border-indigo-500 cursor-pointer">
                                <option value="">No Style (Raw)</option>
                                <option value="cinematic lighting, 8k, photorealistic, highly detailed">Cinematic</option>
                                <option value="anime style, studio ghibli, vibrant colors, detailed">Anime</option>
                                <option value="cyberpunk, neon lights, futuristic, dark atmosphere">Cyberpunk</option>
                                <option value="3d render, blender, octane render, unreal engine 5">3D Render</option>
                                <option value="oil painting, textured, brush strokes, masterpiece">Oil Painting</option>
                                <option value="vaporwave, retro 80s, glitch art, pastel gradients">Vaporwave</option>
                                <option value="minimalist, vector art, flat design, clean lines">Minimalist</option>
                            </select>
                            <i class="ph-bold ph-caret-down absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"></i>
                        </div>
                    </div>

                    <!-- Advanced Settings -->
                    <div>
                        <button onclick="document.getElementById('advanced-opts').classList.toggle('hidden')" class="flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 hover:text-white transition-colors w-full justify-between">
                            <span>Advanced Settings</span>
                            <i class="ph-bold ph-caret-down"></i>
                        </button>
                        <div id="advanced-opts" class="hidden space-y-4 pt-2 border-t border-white/5 mt-2">
                             
                             <!-- Seed -->
                             <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-300">Seed</span>
                                <div class="flex items-center gap-2">
                                    <input type="number" id="seedInput" placeholder="Random" class="w-24 bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-xs text-center focus:outline-none focus:border-indigo-500">
                                    <button onclick="randomizeSeed()" class="p-1.5 rounded-lg bg-white/5 hover:bg-white/10" title="Randomize">
                                        <i class="ph-bold ph-dice-five"></i>
                                    </button>
                                </div>
                             </div>

                             <!-- Model Selection -->
                             <div>
                                <label class="text-xs text-slate-400 mb-1 block">AI Model</label>
                                <div class="relative">
                                    <select id="modelSelect" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs text-white appearance-none focus:outline-none focus:border-indigo-500">
                                        <option value="flux">Flux (Best Quality)</option>
                                        <option value="turbo">Turbo (Fastest)</option>
                                        <option value="unity">Unity (Anime/3D)</option>
                                        <option value="midjourney">Midjourney (Style)</option>
                                    </select>
                                    <i class="ph-bold ph-caret-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs pointer-events-none"></i>
                                </div>
                             </div>

                             <!-- Negative Prompt -->
                             <div>
                                <label class="text-xs text-slate-400 mb-1 block">Negative Prompt (Exclude)</label>
                                <textarea id="negativeInput" rows="2" placeholder="blur, ugly, distortion, bad hands..." class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs text-white placeholder-slate-600 focus:outline-none focus:border-red-500/50 resize-none"></textarea>
                             </div>
                        </div>
                    </div>

                    <!-- History -->
                    <div class="flex-1 min-h-[200px]">
                        <div class="flex items-center justify-between mb-3">
                            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider">Session History</label>
                            <button onclick="clearHistory()" class="text-[10px] text-red-400 hover:text-red-300">Clear All</button>
                        </div>
                        <div id="historyGrid" class="grid grid-cols-2 gap-2">
                            <!-- History items injected here -->
                            <div class="col-span-2 text-center py-8 text-slate-600 text-xs italic">No images generated yet.</div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Canvas Area -->
            <main class="flex-1 relative flex flex-col h-full bg-[#020617]">
                
                <!-- Top Toolbar (Mobile Trigger) -->
                <div class="md:hidden absolute top-4 left-4 z-30">
                     <button onclick="toggleSidebar()" class="p-2 bg-slate-800 rounded-lg border border-white/10 text-white shadow-lg">
                        <i class="ph-bold ph-list text-xl"></i>
                    </button>
                </div>

                <!-- Canvas Display -->
                <div class="flex-1 flex items-center justify-center p-4 md:p-8 overflow-hidden relative" id="canvasContainer">
                    
                    <!-- Background pattern for transparency -->
                    <div class="absolute inset-0 z-0 opacity-20" style="background-image: radial-gradient(#334155 1px, transparent 1px); background-size: 24px 24px;"></div>

                    <!-- The Image Frame -->
                    <div id="imageFrame" class="relative z-10 max-w-full max-h-full transition-all duration-500 rounded-lg shadow-2xl border-2 border-indigo-500/0 ring-1 ring-white/10 group">
                        
                        <!-- Actual Image -->
                        <img id="generatedImage" src="" alt="" class="max-w-full max-h-[calc(100vh-200px)] object-contain rounded-lg hidden shadow-[0_0_50px_-12px_rgba(99,102,241,0.25)]">
                        
                        <!-- Placeholder/Loading State -->
                        <div id="placeholderState" class="flex flex-col items-center justify-center text-center p-12 md:p-24 border-2 border-dashed border-white/10 rounded-2xl bg-white/5">
                            <div class="w-20 h-20 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center mb-6 shadow-inner">
                                <i class="ph-duotone ph-image text-4xl text-slate-600"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-white mb-2">Ready to Create</h3>
                            <p class="text-slate-400 max-w-xs">Enter a prompt below and watch the AI bring your imagination to life.</p>
                        </div>

                        <!-- Loading Spinner Overlay -->
                        <div id="loadingState" class="absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg z-20 hidden flex-col items-center justify-center">
                            <span class="loader mb-4"></span>
                            <p class="text-indigo-300 font-mono text-sm animate-pulse">Dreaming...</p>
                        </div>

                        <!-- Hover Actions Overlay -->
                        <div id="imageActions" class="absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                             <button onclick="downloadImage()" class="p-2 rounded-lg bg-black/50 hover:bg-indigo-600 text-white backdrop-blur-md border border-white/10 transition-colors" title="Download">
                                <i class="ph-bold ph-download-simple"></i>
                            </button>
                             <button onclick="shareImage()" class="p-2 rounded-lg bg-black/50 hover:bg-fuchsia-600 text-white backdrop-blur-md border border-white/10 transition-colors" title="Copy Link">
                                <i class="ph-bold ph-share-network"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bottom Input Bar -->
                <div class="h-auto min-h-[100px] w-full glass-panel border-t border-white/10 p-4 md:p-6 z-30">
                    <div class="max-w-4xl mx-auto flex flex-col md:flex-row gap-4 items-center">
                        <div class="relative flex-1 w-full">
                            <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                                <i class="ph-bold ph-magic-wand text-indigo-400"></i>
                            </div>
                            <!-- Enhance Button -->
                            <button onclick="enrichPrompt()" class="absolute inset-y-0 right-2 my-2 px-3 flex items-center gap-1 bg-white/10 hover:bg-indigo-500/50 rounded-lg text-xs font-medium text-indigo-200 transition-colors" title="Magic Enhance">
                                <i class="ph-bold ph-sparkle"></i> Enhance
                            </button>
                            
                            <input type="text" id="promptInput" placeholder="Describe your imagination (e.g., 'A golden robot in a flower field')" 
                                class="w-full bg-slate-900/80 border border-white/10 rounded-full py-4 pl-12 pr-24 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all shadow-inner"
                                onkeydown="if(event.key === 'Enter') generateImage()">
                        </div>
                        <button onclick="generateImage()" id="generateBtn" class="w-full md:w-auto px-8 py-4 rounded-full bg-gradient-to-r from-indigo-600 to-fuchsia-600 text-white font-bold text-sm tracking-wide uppercase hover:shadow-[0_0_20px_-5px_rgba(99,102,241,0.5)] transition-all active:scale-95 whitespace-nowrap">
                            Generate Art
                        </button>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full bg-slate-800 border border-white/10 text-white shadow-2xl z-[200] transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3">
        <i class="ph-fill ph-check-circle text-green-400"></i>
        <span id="toastMsg" class="text-sm font-medium">Action successful</span>
    </div>

    <script>
        // --- State Management ---
        const state = {
            width: 1024,
            height: 1024,
            ratioName: '1:1',
            seed: Math.floor(Math.random() * 1000000),
            currentUrl: '',
            history: []
        };

        // --- DOM Elements ---
        const els = {
            landing: document.getElementById('landing-page'),
            modal: document.getElementById('app-modal'),
            promptInput: document.getElementById('promptInput'),
            styleSelect: document.getElementById('styleSelect'),
            modelSelect: document.getElementById('modelSelect'),
            negativeInput: document.getElementById('negativeInput'),
            seedInput: document.getElementById('seedInput'),
            image: document.getElementById('generatedImage'),
            placeholder: document.getElementById('placeholderState'),
            loader: document.getElementById('loadingState'),
            imageFrame: document.getElementById('imageFrame'),
            historyGrid: document.getElementById('historyGrid'),
            sidebar: document.getElementById('sidebar'),
            generateBtn: document.getElementById('generateBtn')
        };

        // --- Initialization ---
        window.onload = () => {
            loadHistory();
            state.seed = Math.floor(Math.random() * 1000000);
            els.seedInput.value = state.seed;
            setupScrollObserver();
        };

        // --- Scroll Animation Logic ---
        function setupScrollObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        // --- Modal Control ---
        function openApp() {
            els.landing.classList.add('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                els.landing.style.display = 'none';
                els.modal.classList.remove('hidden-app');
                // Trigger reflow
                void els.modal.offsetWidth;
                els.modal.classList.remove('opacity-0', 'scale-95');
                els.promptInput.focus();
            }, 500);
        }

        function closeApp() {
            els.modal.classList.add('opacity-0');
            setTimeout(() => {
                els.modal.classList.add('hidden-app');
                els.landing.style.display = 'block';
                // Trigger reflow
                void els.landing.offsetWidth;
                els.landing.classList.remove('opacity-0', 'pointer-events-none');
            }, 300);
        }

        function toggleSidebar() {
            els.sidebar.classList.toggle('-translate-x-full');
        }

        // --- Configuration Logic ---
        function setRatio(name, w, h, btn) {
            state.width = w;
            state.height = h;
            state.ratioName = name;

            // Update UI
            document.querySelectorAll('.ratio-btn').forEach(b => {
                b.classList.remove('bg-indigo-600', 'border-indigo-500', 'text-white');
                b.classList.add('bg-white/5', 'border-white/10');
                b.querySelector('div').classList.add('opacity-50');
            });

            btn.classList.remove('bg-white/5', 'border-white/10');
            btn.classList.add('bg-indigo-600', 'border-indigo-500', 'text-white');
            btn.querySelector('div').classList.remove('opacity-50');
        }

        function randomizeSeed() {
            state.seed = Math.floor(Math.random() * 1000000);
            els.seedInput.value = state.seed;
            showToast('New seed generated');
        }

        function enrichPrompt() {
            const current = els.promptInput.value;
            if(!current) {
                showToast("Type something first!", true);
                return;
            }
            const enhancements = ", highly detailed, 8k resolution, cinematic lighting, masterpiece, sharp focus, vibrant";
            if (!current.includes('masterpiece')) {
                els.promptInput.value = current + enhancements;
                showToast("Magic enhancements applied! ");
            } else {
                showToast("Already enhanced!", true);
            }
        }

        // --- Generation Logic ---
        function generateImage() {
            const rawPrompt = els.promptInput.value.trim();
            if (!rawPrompt) {
                showToast('Please enter a prompt first!', true);
                els.promptInput.focus();
                return;
            }

            // Prepare UI
            els.generateBtn.disabled = true;
            els.generateBtn.innerHTML = '<i class="ph-bold ph-spinner animate-spin"></i> Creating...';
            els.placeholder.classList.add('hidden');
            els.image.classList.add('hidden');
            els.loader.classList.remove('hidden');
            els.loader.style.display = 'flex';
            
            // Frame styling
            els.imageFrame.classList.add('border-indigo-500/50', 'shadow-[0_0_50px_-10px_rgba(99,102,241,0.5)]');

            // Construct URL
            const style = els.styleSelect.value;
            const model = els.modelSelect.value;
            const negative = els.negativeInput.value.trim();
            
            let fullPrompt = style ? `${rawPrompt}, ${style}` : rawPrompt;
            
            const seed = els.seedInput.value || Math.floor(Math.random() * 1000000);
            
            // Pollinations API URL Structure
            const encodedPrompt = encodeURIComponent(fullPrompt);
            const encodedNegative = negative ? encodeURIComponent(negative) : '';
            
            let imageUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${state.width}&height=${state.height}&seed=${seed}&model=${model}&nologo=true`;
            
            if (negative) {
                imageUrl += `&negative=${encodedNegative}`;
            }
            
            state.currentUrl = imageUrl;

            // Image Load Handling
            const img = new Image();
            img.onload = () => {
                els.image.src = imageUrl;
                els.image.classList.remove('hidden');
                els.loader.classList.add('hidden');
                els.loader.style.display = 'none';
                
                els.generateBtn.disabled = false;
                els.generateBtn.innerHTML = 'Generate Art';
                
                // Save to history
                addToHistory(imageUrl, rawPrompt, state.ratioName, model);
                showToast('Image generated successfully!');
            };
            
            img.onerror = () => {
                els.loader.classList.add('hidden');
                els.placeholder.classList.remove('hidden');
                els.generateBtn.disabled = false;
                els.generateBtn.innerHTML = 'Generate Art';
                showToast('Failed to generate image. Try again.', true);
            };

            img.src = imageUrl;
        }

        // --- History & Persistence ---
        function addToHistory(url, prompt, ratio, model) {
            const item = { url, prompt, ratio, model, timestamp: Date.now() };
            state.history.unshift(item); // Add to top
            if (state.history.length > 20) state.history.pop(); // Keep last 20
            
            localStorage.setItem('pm_gen_history', JSON.stringify(state.history));
            renderHistory();
        }

        function loadHistory() {
            const stored = localStorage.getItem('pm_gen_history');
            if (stored) {
                state.history = JSON.parse(stored);
                renderHistory();
            }
        }

        function renderHistory() {
            const grid = els.historyGrid;
            grid.innerHTML = '';

            if (state.history.length === 0) {
                grid.innerHTML = '<div class="col-span-2 text-center py-8 text-slate-600 text-xs italic">No images generated yet.</div>';
                return;
            }

            state.history.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'aspect-square relative rounded-lg overflow-hidden group cursor-pointer border border-white/10';
                div.innerHTML = `
                    <img src="${item.url}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110" loading="lazy">
                    <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-2">
                        <p class="text-[10px] text-white line-clamp-2 leading-tight">${item.prompt}</p>
                        <div class="flex items-center justify-between mt-1">
                             <p class="text-[9px] text-indigo-300 uppercase">${item.model || 'Flux'}</p>
                             <button class="delete-btn text-red-400 hover:text-red-300 p-1" title="Delete">
                                <i class="ph-bold ph-trash"></i>
                             </button>
                        </div>
                    </div>
                `;
                
                // Handle click: load image if not clicking delete
                div.onclick = (e) => {
                    if (e.target.closest('.delete-btn')) {
                        deleteHistoryItem(index);
                    } else {
                        restoreImage(item);
                    }
                };
                
                grid.appendChild(div);
            });
        }

        function deleteHistoryItem(index) {
            state.history.splice(index, 1);
            localStorage.setItem('pm_gen_history', JSON.stringify(state.history));
            renderHistory();
            showToast('Image removed from history');
        }

        function restoreImage(item) {
            els.placeholder.classList.add('hidden');
            els.image.classList.remove('hidden');
            els.image.src = item.url;
            state.currentUrl = item.url;
            els.promptInput.value = item.prompt;
            showToast('Image loaded from history');
        }

        function clearHistory() {
            if(confirm('Are you sure you want to clear all history?')) {
                state.history = [];
                localStorage.removeItem('pm_gen_history');
                renderHistory();
                showToast('History cleared');
            }
        }

        // --- Actions ---
        async function downloadImage() {
            if (!state.currentUrl) return;
            
            try {
                showToast('Preparing download...');
                const response = await fetch(state.currentUrl);
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                const promptSlug = els.promptInput.value.slice(0, 20).replace(/[^a-z0-9]/gi, '_').toLowerCase();
                a.download = `pm-gen-${promptSlug}-${Date.now()}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                showToast('Download started');
            } catch (e) {
                console.error(e);
                showToast('Download failed', true);
            }
        }

        function shareImage() {
            if (!state.currentUrl) return;
            // Since the URL is from pollinations (which is public), we can just copy the URL
            navigator.clipboard.writeText(state.currentUrl).then(() => {
                showToast('Image link copied to clipboard!');
            }).catch(() => {
                showToast('Failed to copy link', true);
            });
        }

        // --- Utilities ---
        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            const toastMsg = document.getElementById('toastMsg');
            const icon = toast.querySelector('i');

            toastMsg.innerText = msg;
            icon.className = isError ? 'ph-fill ph-warning-circle text-red-400' : 'ph-fill ph-check-circle text-green-400';
            
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

    </script>
  <<!-- 'It is your responsibility to notify your visitors about cookies used and data collected on your blog. Blogger makes a standard notification available for you to use on your blog, and you can customize it or replace with your own notice. See http://www.blogger.com/go/cookiechoices for more details.' -->
<script src="/js/cookienotice.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
    window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
        (window.cookieOptions && cookieOptions.msg) || 'This site uses cookies from Google to deliver its services and to analyze traffic. Your IP address and user-agent are shared with Google along with performance and security metrics to ensure quality of service, generate usage statistics, and to detect and address abuse.',
        (window.cookieOptions && cookieOptions.close) || 'Got it',
        (window.cookieOptions && cookieOptions.learn) || 'Learn More',
        (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
  });
</script>

</body>
</html>
